// RawBlock Gridlayout
//
// RawBlock provides a layout gridsystem that is flexible, responsive and uses a human readable syntax.
//
// Styleguide 2

// Basic principles
//
// The layout structur is defined by the use of modifier classes. Modifiers in RawBlock are flags set on
// components or elements to represent a different state or version and are are recognizable by the `.is-*` prefix .
// The layout modifiers are globally defined and can be used on all elements of the page.
//
// Styleguide 2.1

// The Grid
//
// The layout grid targets several screen sizes. Our gridsystem uses an other approach then many other frameworks.
// RawBlock is not based on a 12 columns or 16 columns grid, but uses **percentage** as his base units.
// Inside file `_rb_layout_config.scss` in directory `sources/sass/variables` you can find the variable `$breakpointConfig`
// where you can declare your breakpoints and define the specific property.
// The property is also `breakpoint-class`, which will be suffixed to the `is-size-%` modifier.
//
// The default and  **mandatory**  property is `all`. This property defines the layout styles for all screensizes.
// The other properties can be changed or complemented to your own requirement.
//
// Our default layout breakpoints are:
//
// `is-size-%`      - for all screens widths
// `is-size-%-s`    - for screens width up to 768px.
// `is-size-%-m`    - for screens widths between 769px and 1024px.
// `is-size-%-l`    - for screens widths above 1025px.
//
// Styleguide 2.2

// Columns
//
// RawBlock uses 22 width units that are starting with `.is-size-%` ranging from **5%** to **100%** with **5%** increments.
//
// Styleguide 2.3

@mixin rb-generate-layout-columns() {

	.is-column-group {
		display: flex;
		flex-wrap: wrap;

		.is-column-group {
			flex: 1;
		}
	}

	.is-equal-heights {
		> [class*=is-size-]  {
			display: flex;
			flex-wrap: wrap;
		}
	}

	.is-unequal-height,
	[class*=is-size-].is-unequal-height {
		display: block;
	}

	.is-equal-height,
	[class*=is-size-].is-equal-height {
		display: flex;
		flex-wrap: wrap;
	}

}

@mixin rb-layout-offset($className) {

	@if $className == 'all' {
		$offsetType: '';

	} @else {
		$offsetType: '-' + $className;
	}

	.is-offset-right#{$offsetType} {
		margin-left: auto;
	}

	.is-offset-left#{$offsetType} {
		margin-right: auto;
	}

	.is-offset-center#{$offsetType} {
		margin: auto;
	}
}

//
//
//
@mixin rb-size-gutter-generator($className, $gutter) {

	@if type-of($gutter) == 'map' {

		@if map-has-key($gutter, horizontal) {
			$gutterHorizontal: map-get($gutter, horizontal);
		}
		@if map-has-key($gutter, vertical) {
			$gutterVertical: map-get($gutter, vertical);
		}

		.is-gutters {
			margin-left: (-$gutterHorizontal);

			> [class*=is-size-] {
				margin-bottom: $gutterVertical;
				padding-left: ($gutterHorizontal);
			}
		}

		.is-gutters-vertical {

			> [class*=is-size-]  {
				margin-bottom: $gutterVertical;
			}
		}

		.is-gutters-horizontal {
			margin-left: (-$gutterHorizontal);

			> [class*=is-size-]  {
				padding-left: ($gutterHorizontal);
			}
		}


	}
}


//  Size Generator
//
//
@mixin rb-size-generator($className) {
	$i: 5;
	$steps: 5;

	@if $className == 'all' {
		$colomnType: '';

	} @else {
		$colomnType: '-' + $className;
	}

	@while $i <= 100 {

		//If no width is desired
		@if $i == 100 {
			.is-size-auto#{$colomnType} {
				width: auto;
			}

			//Element will take available space
			.is-size-flex#{$colomnType} {
				flex: 1;
				width: auto;
			}

			//Element will take twice the available space
			.is-size-flex-double {
				flex: 2;
				width: auto;
			}
		}

		// create width: 33%
		@if $i > 30 and $i <= 35 {
			.is-size-33#{$colomnType} {
				width: 33.33%;
			}
		}

		// create width: 66%
		@if $i > 65 and $i <= 70 {
			.is-size-66#{$colomnType} {
				width: 66.66%;
			}
		}

		// create width: 16%
		@if $i > 15 and $i <= 20 {
			.is-size-16#{$colomnType} {
				width: 16.66%;
			}
		}

		// create
		&.is-size-#{$i}#{$colomnType} {
			width: $i * 1%;
		}

		// increment the counter
		$i: $i + $steps;
	}
}

//
@mixin rb-generate-layout-styles($configs) {
	//Styles breakpoints
	@each $className, $config in $configs {
		$gutter: map-get($config, gutter);
		$flexOrderSize: map-get($config, flexOrderSize);

		@if $className == 'all' {
			@include rb-layout-styles($className, $gutter, $flexOrderSize);
			@include rb-generate-layout-columns();
		} @else {
			@media #{map-get($config, media)} {
				@include rb-layout-styles($className, $gutter, $flexOrderSize);
			}
		}
	}
}

@mixin rb-layout-styles($className, $gutter, $flexOrderSize) {
	@include rb-size-generator($className);
	@include rb-size-gutter-generator($className, $gutter);
	@include rb-flex-order-generator($className, $flexOrderSize);
	@include rb-layout-offset($className);
}
